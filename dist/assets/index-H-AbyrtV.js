import{S as x,C as O,P,W as v,A as W,D as z,O as E,F as g,a as I,L as S,R as C,V as L,b as F}from"./three-Czwj7ce8.js";(function(){const s=document.createElement("link").relList;if(s&&s.supports&&s.supports("modulepreload"))return;for(const e of document.querySelectorAll('link[rel="modulepreload"]'))y(e);new MutationObserver(e=>{for(const n of e)if(n.type==="childList")for(const l of n.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&y(l)}).observe(document,{childList:!0,subtree:!0});function i(e){const n={};return e.integrity&&(n.integrity=e.integrity),e.referrerPolicy&&(n.referrerPolicy=e.referrerPolicy),e.crossOrigin==="use-credentials"?n.credentials="include":e.crossOrigin==="anonymous"?n.credentials="omit":n.credentials="same-origin",n}function y(e){if(e.ep)return;e.ep=!0;const n=i(e);fetch(e.href,n)}})();let c,p,f,A,b,d={},o,a,u,m=!1,r=new L;const M=.05;j();k();function j(){c=new x,c.background=new O(14657135),p=new P(75,window.innerWidth/window.innerHeight,.1,1e3),p.position.set(0,5,10),f=new v({antialias:!0}),f.setSize(window.innerWidth,window.innerHeight),document.body.appendChild(f.domElement),A=new F;const t=new W(16777215,1);c.add(t);const s=new z(16777215,1);s.position.set(10,10,10),c.add(s);const i=new E(p,f.domElement);i.enableDamping=!0,i.dampingFactor=.25,i.screenSpacePanning=!1,i.maxPolarAngle=Math.PI/2,i.update(),new g().load("/assets/Mars.fbx",n=>{u=n,u.scale.set(.01,.01,.01),u.position.set(0,0,0),c.add(u)}),new g().load("assets/AstroIdle.fbx",n=>{a=n,b=new I(a),h("/assets/AstroWalking.fbx","walk"),h("/assets/AstroJump.fbx","jump"),h("/assets/AstroBackwards.fbx","backwards"),h("/assets/AstroIdle.fbx","idle",!0),a.scale.set(.002,.002,.002),a.position.set(0,5,0),c.add(a)}),window.addEventListener("resize",H),document.addEventListener("keydown",D),document.addEventListener("keyup",R)}function h(t,s,i=!1){new g().load(t,e=>{const n=e.animations[0],l=b.clipAction(n);d[s]=l,console.log(`Animation ${s} loaded successfully`),i&&(o=l,o.play())})}function D(t){if(!a||!d)return;const s=.005,i=.07;switch(t.key){case"w":r.z=-s,w("walk");break;case"s":r.z=s,w("backwards");break;case"a":a.rotation.y+=i;break;case"d":a.rotation.y-=i;break;case" ":m||(m=!0,r.y=.3,w("jump"));break}}function R(t){if(!(!a||!d)){switch(t.key){case"w":case"s":r.z=0;break;case"a":case"d":break;case" ":m=!1,r.y=0;break}r.x===0&&r.z===0&&w("idle")}}function w(t){d[t]&&(t==="jump"?(o&&o.fadeOut(.3),o=d[t],o.reset().fadeIn(.3).play(),o.clampWhenFinished=!0,o.loop=S,o.addEventListener("finished",()=>{m||w("idle")})):o!==d[t]&&(o&&o.fadeOut(.3),o=d[t],o.reset().fadeIn(.3).play()))}function H(){p.aspect=window.innerWidth/window.innerHeight,p.updateProjectionMatrix(),f.setSize(window.innerWidth,window.innerHeight)}function k(){requestAnimationFrame(k);const t=Math.min(A.getDelta(),.1);if(b&&b.update(t),a&&(r.y-=M*t*60,a.position.y+=r.y,u)){const i=new C(a.position.clone().add(new L(0,1,0)),new L(0,-1,0),0,2).intersectObject(u,!0);i.length>0&&i[0].distance<1.5&&(a.position.y=i[0].point.y,r.y=0,m=!1)}f.render(c,p)}
