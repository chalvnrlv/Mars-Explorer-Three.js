import{S as x,C as O,P as z,W as P,A as v,D as W,O as S,F as L,a as E,L as C,V as b,R as F,b as I}from"./three-Czwj7ce8.js";(function(){const o=document.createElement("link").relList;if(o&&o.supports&&o.supports("modulepreload"))return;for(const e of document.querySelectorAll('link[rel="modulepreload"]'))c(e);new MutationObserver(e=>{for(const n of e)if(n.type==="childList")for(const f of n.addedNodes)f.tagName==="LINK"&&f.rel==="modulepreload"&&c(f)}).observe(document,{childList:!0,subtree:!0});function r(e){const n={};return e.integrity&&(n.integrity=e.integrity),e.referrerPolicy&&(n.referrerPolicy=e.referrerPolicy),e.crossOrigin==="use-credentials"?n.credentials="include":e.crossOrigin==="anonymous"?n.credentials="omit":n.credentials="same-origin",n}function c(e){if(e.ep)return;e.ep=!0;const n=r(e);fetch(e.href,n)}})();let d,w,u,k,h,l={},s,i,p,g=!1,a=new b;j();A();function j(){d=new x,d.background=new O(14657135),w=new z(75,window.innerWidth/window.innerHeight,.1,1e3),w.position.set(0,5,10),u=new P({antialias:!0}),u.setSize(window.innerWidth,window.innerHeight),document.body.appendChild(u.domElement),k=new I;const t=new v(16777215,1);d.add(t);const o=new W(16777215,1);o.position.set(10,10,10),d.add(o);const r=new S(w,u.domElement);r.enableDamping=!0,r.dampingFactor=.25,r.screenSpacePanning=!1,r.maxPolarAngle=Math.PI/2,r.update(),new L().load("/assets/Mars.fbx",n=>{p=n,p.scale.set(.01,.01,.01),p.position.set(0,0,0),d.add(p)}),new L().load("/assets/AstroIdle.fbx",n=>{i=n,h=new E(i),y("/assets/AstroWalking.fbx","walk"),y("/assets/AstroJump.fbx","jump"),y("/assets/AstroBackwards.fbx","backwards"),y("/assets/AstroIdle.fbx","idle",!0),i.scale.set(.002,.002,.002),i.position.set(0,5,0),d.add(i)}),window.addEventListener("resize",H),document.addEventListener("keydown",D),document.addEventListener("keyup",M)}function y(t,o,r=!1){new L().load(t,e=>{const n=e.animations[0],f=h.clipAction(n);l[o]=f,console.log(`Animation ${o} loaded successfully`),r&&(s=f,s.play())})}function D(t){if(!i||!l)return;const o=.005,r=.07;switch(t.key){case"w":a.z=-o,m("walk");break;case"s":a.z=o,m("backwards");break;case"a":i.rotation.y+=r;break;case"d":i.rotation.y-=r;break;case" ":g||(g=!0,a.y=.3,m("jump"));break}}function M(t){if(!(!i||!l)){switch(t.key){case"w":case"s":a.z=0;break;case"a":case"d":break;case" ":g=!1,a.y=0;break}a.x===0&&a.z===0&&m("idle")}}function m(t){l[t]&&(t==="jump"?(s&&s.fadeOut(.3),s=l[t],s.reset().fadeIn(.3).play(),s.clampWhenFinished=!0,s.loop=C,s.addEventListener("finished",()=>{g||m("idle")})):s!==l[t]&&(s&&s.fadeOut(.3),s=l[t],s.reset().fadeIn(.3).play()))}function H(){w.aspect=window.innerWidth/window.innerHeight,w.updateProjectionMatrix(),u.setSize(window.innerWidth,window.innerHeight)}function A(){requestAnimationFrame(A);const t=k.getDelta();if(h&&h.update(t),i){const o=new b(0,0,-1).applyQuaternion(i.quaternion);if(o.y=0,o.normalize(),i.position.add(o.multiplyScalar(a.z)),p){const c=new F(new b(i.position.x,i.position.y+5,i.position.z),new b(0,-1,0)).intersectObject(p,!0);c.length>0?i.position.y=c[0].point.y:i.position.y-=t*2}}u.render(d,w)}
